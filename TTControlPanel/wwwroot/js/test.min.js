function getIntBytes(n,t){var i=[],r=t;do i[--r]=n&255,n=n>>8;while(r);return i}function classRequestQueue(){this.requestList=[];this.maxRequestsAllowed=100;this.ajaxTimeout=REQUEST_INTERVAL;this.cycleMilliseconds=REQUEST_INTERVAL;this.queueState="Initialised";this.stateCheckTimeout;this.runAgainImmediately=!1}function classRequest(){this.outboundDestinationAddressingScheme=1;this.outboundDestinationAddress=1;this.outboundTransactionId=1;this.messageString="";this.inboundDestinationAddressingScheme=1;this.inboundDestinationAddressing=1;this.inboundTransactionId=1;this.requestStatus=0;this.executionState="Awake";this.submissionInterval=REQUEST_INTERVAL;this.isMonitorRequest=!1;this.urlString="/ecmp";this.queueReference=0;this.maxResponseSize=1024;this.requestCode=0;this.optionCode=0;this.byteArray="";this.successCallBack=null;this.unitStrings=["","","mm","m","UU","revs","\x0e\x0e°","","modeDependent8","mm/s","UU/ms","rpm","Hz","kHz","MHz","modeDependent15","modeDependent16","s/m/s","UU/mm/s","s/1000rpm","s/100Hz","s","s","s²/1000mm/s","s²/UU/ms","s²/1000rpm","s²/100Hz","modeDependent27","modeDependent28","Msg/s","Hours","Mins","s","ms","μs","ns","V","A","Ohms","mH","kW","kVAr","MWh","kWh","°C","/°C","kgm²","Nm","Nm/A","V/1000rpm","Bits","Bytes","kB","MB","Bit/s","Baud","kBaud","MBaud","PolePairs","%","V/ms"]}function classRequestReadWithType(){classRequest.call(this);this.addressingScheme=1;this.requestCode=REQUEST_READ_WITH_TYPE;this.parameterList=[];this.returnedParameters=[];this.returnCount=0}function classRequestObjectInfo(){classRequest.call(this);this.addressingScheme=1;this.requestCode=REQUEST_OBJECT_INFO;this.parameterList=[];this.returnedObjectInfo=[];this.returnCount=0}function classRequestWrite(){classRequest.call(this);this.addressingScheme=1;this.requestCode=REQUEST_WRITE;this.parameterList=[];this.returnedParameters=[];this.returnCount=0}function UserLogout(){$("#userInfo").text(getTT("Signing out...","tt_83"));$.ajax({url:"/logout",cache:!1,async:!0,type:"POST",data:"logout="+$.cookie("token"),dataType:"text",complete:function(){$.removeCookie("token",{path:"/"});$.removeCookie("user",{path:"/"});localStorage.removeItem("user");$("body").css("cursor","progress");window.location.assign("/index.html")},timeout:function(){$.removeCookie("token",{path:"/"});$.removeCookie("user",{path:"/"});localStorage.removeItem("user");$("body").css("cursor","progress");window.location.assign("/index.html")}})}function AddProgress(n){n.count<n.total&&(n.count++,$("#progressBar").animate({width:Math.round(n.count/n.total*100)+"%"},500))}function getTT(n,t){if(mLanguage==null)return n;var i=parseInt(t.replace("tt_",""));return ctdatabase.getCaption(i)}var oDriveInfoReadRequest;window.console||(window.console={});window.console.log||(window.console.log=function(){});var DEBUG=!0,mLanguage=null,mProductFamily=null,mProductModel=null,mLastTick=0,REQUEST_READ_WITH_TYPE=17,REQUEST_WRITE=18,REQUEST_OBJECT_INFO=19,REQUEST_INTERVAL=1e3;classRequestQueue.prototype.addRequest=function(n){return this.requestList.length>=this.maxRequestsAllowed?!1:(n.queueReference=this,this.requestList.push(n),!0)};classRequestQueue.prototype.stateCheck=function(n){var t,r,u,i;if(n=typeof n!="undefined"?n:"Unkonwn",mLastTick=new Date,t=this,t.runAgainImmediately=!1,this.queueState!="Processing"){if(this.requestList.length>0)for(r=0,u=this.requestList.length;r<u;)if(this.queueState!="Processing")this.requestList[0].executionState=="Awake"?(this.queueState="Processing",i=this.requestList[0],i.executionState="Processing",$.ajax({url:i.urlString,cache:!1,async:!0,contentType:"text/plain; charset=utf-8",type:"POST",data:"ecmp="+i.buildMessage(),dataType:"text",success:i.handleSuccess,error:i.handleError,callingReference:i,timeout:this.ajaxTimeout}),this.requestList.push(this.requestList.shift()),this.queueState="Pending"):this.requestList[0].executionState=="Complete"?this.requestList.shift():this.requestList.push(this.requestList.shift()),r++;else{t.runAgainImmediately=!0;break}}else t.runAgainImmediately=!0;typeof t.stateCheckTimeout!="undefined"&&clearTimeout(t.stateCheckTimeout);t.stateCheckTimeout=setTimeout(function(){t.stateCheck("Ticker")},t.cycleMilliseconds)};classRequest.prototype.decimalToHex=function(n,t){n<0&&(n=255+n+1);var i=Number(n).toString(16);for(t=typeof t=="undefined"||t===null?t=2:t;i.length<t;)i="0"+i;return"%"+i};classRequest.prototype.buildMessage=function(){this.messageString="";this.messageString+=this.decimalToHex(this.outboundDestinationAddressingScheme);this.outboundDestinationAddressingScheme>1&&(this.messageString+=this.decimalToHex(this.outboundDestinationAddress));this.messageString+=this.decimalToHex(this.inboundDestinationAddressingScheme);this.inboundDestinationAddressingScheme>1&&(this.messageString+=this.decimalToHex(this.inboundDestinationAddressing));this.messageString+=this.decimalToHex(this.outboundTransactionId);this.messageString+=this.multiByteToHex(this.maxResponseSize,2);this.messageString+=this.decimalToHex(this.requestCode);this.messageString+=this.decimalToHex(0)};classRequest.prototype.handleSuccess=function(n){this.byteArray=n.split("%");this.byteArray.shift();this.outboundDestinationAddressingScheme=this.byteArray.shift();this.outboundDestinationAddressingScheme>1&&(this.outboundDestinationAddressing=this.byteArray.shift());this.inboundDestinationAddressingScheme=this.byteArray.shift();this.inboundDestinationAddressingScheme>1&&(this.inboundDestinationAddressing=this.byteArray.shift());this.inboundTransactionId=this.byteArray.shift();this.requestStatus=parseInt(this.byteArray.shift(),16)%256;this.requestStatus!=0};classRequest.prototype.handleError=function(n){n.status==423?($("#notificationArea").html(getTT("Access denied, session has timed out.","tt_103")).show(),this.callingReference.terminate()):this.callingReference.isMonitorRequest==!1?this.callingReference.persist():this.callingReference.terminate()};classRequest.prototype.multiByteToHex=function(n,t){var r,u;switch(t){case 2:return r=Math.floor(n/256),u=n%256,this.decimalToHex(r)+this.decimalToHex(u);case 4:var i=Math.floor(n/16777216),f=Math.floor((n-i*16777216)/65536),e=Math.floor((n-i*16777216-f*65536)/256),o=n%256;return this.decimalToHex(i)+this.decimalToHex(f)+this.decimalToHex(e)+this.decimalToHex(o)}};classRequest.prototype.bytesToString=function(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(parseInt(n[t],16));return i};classRequest.prototype.terminate=function(){this.executionState=this.isMonitorRequest==!1?"Complete":"Awake";var n=this.queueReference;n.queueState="Pending";n.runAgainImmediately&&n.stateCheck("runAgainImmediately")};classRequest.prototype.persist=function(){this.executionState="Dormant";var n=this.submissionInterval,t=this;setTimeout(function(){t.wakeUp()},n/2);this.queueReference.queueState="Pending"};classRequest.prototype.wakeUp=function(){this.executionState="Awake"};classRequest.prototype.getDataValue=function(n){var i=[],t="",u,f,a,r;switch(n){case 0:case 1:case 2:t=parseInt(this.byteArray.shift(),16);break;case 3:case 4:u=parseInt(this.byteArray.shift(),16)*256;f=parseInt(this.byteArray.shift(),16);t=u+f;break;case 5:case 6:var e=parseInt(this.byteArray.shift(),16)*16777216,o=parseInt(this.byteArray.shift(),16)*65536,u=parseInt(this.byteArray.shift(),16)*256,f=parseInt(this.byteArray.shift(),16);t=e+o+u+f;break;case 7:case 8:var s=parseInt(this.byteArray.shift(),16)*72057594037927936,h=parseInt(this.byteArray.shift(),16)*281474976710656,c=parseInt(this.byteArray.shift(),16)*1099511627776,l=parseInt(this.byteArray.shift(),16)*4294967296,e=parseInt(this.byteArray.shift(),16)*16777216,o=parseInt(this.byteArray.shift(),16)*65536,u=parseInt(this.byteArray.shift(),16)*256,f=parseInt(this.byteArray.shift(),16);t=s+h+c+l+e+o+u+f;break;case 9:case 10:var v=parseInt(this.byteArray.shift(),16)*13292279957849159e20,y=parseInt(this.byteArray.shift(),16)*51922968585348276e17,p=parseInt(this.byteArray.shift(),16)*2028240960365167e16,w=parseInt(this.byteArray.shift(),16)*79228162514264338e12,b=parseInt(this.byteArray.shift(),16)*30948500982134507e10,k=parseInt(this.byteArray.shift(),16)*1208925819614629e9,d=parseInt(this.byteArray.shift(),16)*47223664828696452e5,g=parseInt(this.byteArray.shift(),16)*1844674407370955e4,s=parseInt(this.byteArray.shift(),16)*72057594037927936,h=parseInt(this.byteArray.shift(),16)*281474976710656,c=parseInt(this.byteArray.shift(),16)*1099511627776,l=parseInt(this.byteArray.shift(),16)*4294967296,e=parseInt(this.byteArray.shift(),16)*16777216,o=parseInt(this.byteArray.shift(),16)*65536,u=parseInt(this.byteArray.shift(),16)*256,f=parseInt(this.byteArray.shift(),16);t=v+y+p+w+b+k+d+g+s+h+c+l+e+o+u+f;break;case 30:i.push(this.byteArray.shift());i.push(this.byteArray.shift());t=this.utfDecode(i);break;case 31:for(a=parseInt(this.byteArray.shift(),16)*256+parseInt(this.byteArray.shift(),16),r=0;r<a;r++)i.push(this.byteArray.shift());t=this.utfDecode(i);break;case 128:for(r=0;r<128;r++)i.push(this.byteArray.shift());t=this.utfDecode(i)}return t};classRequest.prototype.utfDecode=function(n){for(var r="",t=0,i=c1=c2=0;t<n.length;)i=parseInt(n[t],16),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(c2=parseInt(n[t+1],16),r+=String.fromCharCode((i&31)<<6|c2&63),t+=2):(c2=parseInt(n[t+1],16),c3=parseInt(n[t+2],16),r+=String.fromCharCode((i&15)<<12|(c2&63)<<6|c3&63),t+=3);return r};classRequest.prototype.utfEncode=function(n){return unescape(encodeURIComponent(n))};classRequestReadWithType.prototype=new classRequest;classRequestReadWithType.prototype.buildMessage=function(){return classRequest.prototype.buildMessage.call(this),this.messageString+=this.decimalToHex(this.addressingScheme),this.messageString+=this.getReadParameterList(),this.messageString};classRequestReadWithType.prototype.getReadParameterList=function(){for(var t=this.decimalToHex(this.parameterList.length),n=0;n<this.parameterList.length;n++)switch(this.addressingScheme){case 0:t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2);break;case 1:t+=this.decimalToHex(this.parameterList[n].slotId);t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2)}return t};classRequestReadWithType.prototype.addParameter=function(n,t,i,r){var u=new classReadParameter(n,t,i);u.callBack=r;this.parameterList.push(u)};classRequestReadWithType.prototype.handleSuccess=function(n,t,i){var u,r;classRequest.prototype.handleSuccess.call(this.callingReference,n,t,i);switch(this.callingReference.requestStatus){case 0:this.callingReference.byteArray.shift();u=parseInt(this.callingReference.byteArray.shift(),16);this.callingReference.byteArray.shift();switch(u){case 145:for(this.callingReference.returnCount=parseInt(this.callingReference.byteArray.shift(),16),this.callingReference.returnedParameters=this.callingReference.disectParameters(),this.callingReference.parameterList.length!=this.callingReference.returnedParameters.length,r=0;r<this.callingReference.returnedParameters.length;r++)r<this.callingReference.parameterList.length&&(this.callingReference.parameterList[r].dataType=this.callingReference.returnedParameters[r].dataType,this.callingReference.parameterList[r].decimalPlaces=this.callingReference.returnedParameters[r].decimalPlaces,this.callingReference.parameterList[r].unitText=this.callingReference.returnedParameters[r].unitText,this.callingReference.parameterList[r].updateValue(this.callingReference.returnedParameters[r].currentValue),this.callingReference.parameterList[r].accessStatus=this.callingReference.returnedParameters[r].accessStatus,this.callingReference.parameterList[r].callBack!=null&&this.callingReference.parameterList[r].callBack(this.callingReference.parameterList[r]));this.callingReference.successCallBack!=null&&this.callingReference.successCallBack(this.callingReference)}}this.callingReference.terminate()};classRequestReadWithType.prototype.disectParameters=function(){for(var f=[],e=[],t=0,s,u,n;this.byteArray.length>0&&t==0;)if(t=parseInt(this.byteArray.shift(),16)%256,t==0){var o=parseInt(this.byteArray.shift(),16),h=this.getDataValue(o),c=parseInt(this.byteArray.shift(),16),i=parseInt(this.byteArray.shift(),16),r="";if(i==255){for(s=parseInt(this.byteArray.shift(),16)*256+parseInt(this.byteArray.shift(),16),u=0;u<s;u++)f.push(this.byteArray.shift());r=this.bytesToString(f)}else r=i in this.unitStrings?this.unitStrings[i]:"";n=new classReadParameter(0,0,"");n.currentValue=h;n.dataType=o;n.decimalPlaces=c;n.unitText=r;n.accessStatus=t;e.push(n)}return e};classRequestObjectInfo.prototype=new classRequest;classRequestObjectInfo.prototype.buildMessage=function(){return classRequest.prototype.buildMessage.call(this),this.messageString+=this.decimalToHex(this.addressingScheme),this.messageString+=this.getReadParameterList(),this.messageString};classRequestObjectInfo.prototype.getReadParameterList=function(){for(var t,i=this.decimalToHex(this.parameterList.length*3),n=0;n<this.parameterList.length;n++){t="";switch(this.addressingScheme){case 0:t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2);break;case 1:t+=this.decimalToHex(this.parameterList[n].slotId);t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2)}i+=this.decimalToHex(3)+t;i+=this.decimalToHex(4)+t;i+=this.decimalToHex(5)+t}return i};classRequestObjectInfo.prototype.addParameter=function(n,t,i,r){var u=new classReadParameter(n,t,i);u.callBack=r;this.parameterList.push(u)};classRequestObjectInfo.prototype.handleSuccess=function(n,t,i){var u,r;classRequest.prototype.handleSuccess.call(this.callingReference,n,t,i);switch(this.callingReference.requestStatus){case 0:if(this.callingReference.byteArray.shift(),u=parseInt(this.callingReference.byteArray.shift(),16),this.callingReference.byteArray.shift(),u==147){for(this.callingReference.returnCount=parseInt(this.callingReference.byteArray.shift(),16),this.callingReference.returnedObjectInfo=this.callingReference.disectObjectInfo(),this.callingReference.parameterList.length!=this.callingReference.returnedObjectInfo.length,r=0;r<this.callingReference.returnedObjectInfo.length;r++)r<this.callingReference.parameterList.length&&(this.callingReference.parameterList[r].accessStatus=this.callingReference.returnedObjectInfo[r].accessStatus,this.callingReference.parameterList[r].writable=this.callingReference.returnedObjectInfo[r].writable,this.callingReference.parameterList[r].readNotAllowed=this.callingReference.returnedObjectInfo[r].readNotAllowed,this.callingReference.parameterList[r].string=this.callingReference.returnedObjectInfo[r].string,this.callingReference.parameterList[r].formatId=this.callingReference.returnedObjectInfo[r].formatId,this.callingReference.parameterList[r].min=this.callingReference.returnedObjectInfo[r].min,this.callingReference.parameterList[r].minDataType=this.callingReference.returnedObjectInfo[r].minDataType,this.callingReference.parameterList[r].max=this.callingReference.returnedObjectInfo[r].max,this.callingReference.parameterList[r].maxDataType=this.callingReference.returnedObjectInfo[r].maxDataType,this.callingReference.parameterList[r].callBack!=null&&this.callingReference.parameterList[r].callBack(this.callingReference.parameterList[r]));this.callingReference.successCallBack!=null&&this.callingReference.successCallBack(this.callingReference)}}this.callingReference.terminate()};classRequestObjectInfo.prototype.disectObjectInfo=function(){for(var o=[],f=0,i,u,e;this.byteArray.length>0&&f==0;){if(i=new classReadParameter(0,0,""),f=parseInt(this.byteArray.shift(),16)%256,f==0){infoType=parseInt(this.byteArray.shift(),16);var w=parseInt(this.byteArray.shift(),16),h=parseInt(this.byteArray.shift(),16),c=parseInt(this.byteArray.shift(),16),s=parseInt(this.byteArray.shift(),16),l=s>>1&1,a=s>>2&1,v=c>>5&1,y=h>>1&15,i=new classReadParameter(0,0,"");i.writable=l;i.readNotAllowed=a;i.string=v;i.formatId=y;i.accessStatus=f;f=parseInt(this.byteArray.shift(),16)%256;infoType=parseInt(this.byteArray.shift(),16);var r=parseInt(this.byteArray.shift(),16),t=0,n,p=!1;switch(r){case 0:case 1:case 2:n=0;break;case 3:case 4:n=1;break;case 5:case 6:n=3;break;case 7:case 8:n=7;break;case 9:case 10:n=15;break;case 20:alert("WARNING: Data type Id not handled (single precision floating point)");break;case 21:alert("WARNING: Data type Id not handled (double precision floating point)")}if(r<=10){for(u=n;u>=0;u--)t=t+parseInt(this.byteArray.shift(),16)*Math.pow(2,8*u);r%2==1&&(e=(n+1)*8-1,t>>e&!0&&(t=t-Math.pow(2,e+1)))}i.min=t;i.minDataType=r;f=parseInt(this.byteArray.shift(),16)%256;infoType=parseInt(this.byteArray.shift(),16);r=parseInt(this.byteArray.shift(),16);t=0;n;p=!1;switch(r){case 0:case 1:case 2:n=0;break;case 3:case 4:n=1;break;case 5:case 6:n=3;break;case 7:case 8:n=7;break;case 9:case 10:n=15;break;case 20:alert("WARNING: Data type Id not handled (single precision floating point)");break;case 21:alert("WARNING: Data type Id not handled (double precision floating point)")}if(r<=10){for(u=n;u>=0;u--)t=t+parseInt(this.byteArray.shift(),16)*Math.pow(2,8*u);r%2==1&&(e=(n+1)*8-1,t>>e&!0&&(t=t-Math.pow(2,e+1)))}i.max=t;i.maxDataType=r}o.push(i)}return o};classReadParameter=function(n,t,i){this.menuId=n;this.parameterId=t;this.currentValue="";this.dataType="";this.decimalPlaces=0;this.unitText="";this.slotId=i===undefined?0:i;this.callBack=null;this.writable=!1;this.readNotAllowed=!1;this.string=!1;this.formatId=0;this.min=0;this.minDataType=0;this.max=0;this.maxDataType=0;this.infoTypeID=0;this.accessStatus=0;this.forceUpdate=!1};classReadParameter.prototype.updateValue=function(n){this.currentValue=n;this.successCallBack!=null&&this.successCallBack(this)};classWriteParameter=function(n,t,i,r,u,f){this.menuId=n;this.parameterId=t;this.currentValue="";this.decimalPlaces=0;this.slotId=i===undefined?0:i;this.callBack=null;this.dataType=u;this.decimalPlaces=f;this.value=r;this.accessStatus=0};classRequestWrite.prototype=new classRequest;classRequestWrite.prototype.buildMessage=function(){return classRequest.prototype.buildMessage.call(this),this.messageString+=this.decimalToHex(this.addressingScheme),this.messageString+=this.getWriteParameterList(),this.messageString};classRequestWrite.prototype.getWriteParameterList=function(){for(var u,f,i,r,t=this.decimalToHex(this.parameterList.length),n=0;n<this.parameterList.length;n++){switch(this.addressingScheme){case 0:t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2);break;case 1:t+=this.decimalToHex(this.parameterList[n].slotId);t+=this.multiByteToHex(this.parameterList[n].menuId,2)+this.multiByteToHex(this.parameterList[n].parameterId,2)}for(t+=this.decimalToHex(this.parameterList[n].dataType),(this.parameterList[n].dataType==0||this.parameterList[n].dataType>22)&&(this.parameterList[n].decimalPlaces=255),t+=this.decimalToHex(this.parameterList[n].decimalPlaces),u=ctdatabase.getValueSize(this.parameterList[n].dataType),f=[],i=0;i<u;i++)f[i]=(this.parameterList[n].value>>8*i)%256;for(r=u;r>0;r--)t+=this.decimalToHex(f[r-1])}return t};classRequestWrite.prototype.addParameter=function(n,t,i,r,u,f){var e=new classWriteParameter(n,t,i,r,u,f);this.parameterList.push(e)};classRequestWrite.prototype.handleSuccess=function(n,t,i){var u,r;classRequest.prototype.handleSuccess.call(this.callingReference,n,t,i);switch(this.callingReference.requestStatus){case 0:this.callingReference.byteArray.shift();u=parseInt(this.callingReference.byteArray.shift(),16);this.callingReference.byteArray.shift();switch(u){case 146:if(this.callingReference.returnCount=parseInt(this.callingReference.byteArray.shift(),16),r=0,this.callingReference.byteArray.length>0)while(this.callingReference.byteArray.length>0)r=parseInt(this.callingReference.byteArray.shift(),16),this.callingReference.accessStatus=r;this.callingReference.successCallBack!=null&&this.callingReference.successCallBack(this.callingReference)}}this.callingReference.terminate()};Number.prototype.padLeft=function(n,t){return t||(t=" "),(""+this).length>=n?""+this:arguments.callee.call(t+this,n,t)};var oRequestQueue=new classRequestQueue,namePartsReceived=0,nameParts=[],receivedNamePart=function(n){var t,i;if(namePartsReceived++,n.parameterId==27)mProductFamily=(n.currentValue>>9&31)-2,mProductModel=n.currentValue>>4&31,typeof LoadMenus=="function"&&LoadMenus(),$("#modelNumber").text(ctdatabase.getDeviceName(mProductFamily+"."+mProductModel));else for(nameParts[n.parameterId-79]="",bytes=getIntBytes(n.currentValue,4),t=0;t<bytes.length;t++)bytes[t]!=0&&(nameParts[n.parameterId-79]+=String.fromCharCode(bytes[t]));namePartsReceived==5&&(i=nameParts[0]+nameParts[1]+nameParts[2]+nameParts[3],i==""?(i="Unnamed",document.title=$("#modelNumber").text()):document.title=i+" - "+$("#modelNumber").text(),$("#driveName").text(i),$("#driveInfo").fadeIn())};$("#driveInfo").length&&(oDriveInfoReadRequest=new classRequestReadWithType,oDriveInfoReadRequest.addParameter(11,53,0,function(n){$("#msSerial").text(n.currentValue)}),oDriveInfoReadRequest.addParameter(11,52,0,function(n){$("#lsSerial").text(n.currentValue.padLeft(9,"0"))}),oDriveInfoReadRequest.addParameter(11,29,0,function(n){var t=n.currentValue.padLeft(8,"0"),i=t.substring(0,2)+"."+t.substring(2,4)+"."+t.substring(4,6)+"."+t.substring(6);$("#firmwareVersion").text(i)}),oDriveInfoReadRequest.addParameter(11,79,0,receivedNamePart),oDriveInfoReadRequest.addParameter(11,80,0,receivedNamePart),oDriveInfoReadRequest.addParameter(11,81,0,receivedNamePart),oDriveInfoReadRequest.addParameter(11,82,0,receivedNamePart),oDriveInfoReadRequest.addParameter(2,27,100,receivedNamePart),oRequestQueue.addRequest(oDriveInfoReadRequest));$(function(){if($.cookie("token")!==null){var n=null;n=typeof localStorage!="undefined"?localStorage.getItem("user"):$.cookie("user");n!==null&&($("#userInfo").text(getTT("Signed in as","tt_81")+" "+n),$("#loginMenu").html('<a href="#" onclick="UserLogout()">'+getTT("SIGN OUT","tt_80")+"<\/a>"))}$(document).ajaxSend(function(){$("#ajax").css("background-color","gray").show()}).ajaxSuccess(function(){$("#ajax").css("background-color","green")}).ajaxError(function(){$("#ajax").css("background-color","red")}).ajaxComplete(function(){$("#ajax").fadeOut("slow")});typeof delayStateCheck=="undefined"&&oRequestQueue.stateCheck()}),function(n,t,i){function f(n){return n}function e(n){return decodeURIComponent(n.replace(u," "))}var u=/\+/g,r=n.cookie=function(u,o,s){var p,c,l,a,h,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(u),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(l=r.raw?f:e,a=t.cookie.split("; "),h=0;v=a[h]&&a[h].split("=");h++)if(l(v.shift())===u)return y=l(v.join("=")),r.json?JSON.parse(y):y;return null};r.defaults={};n.removeCookie=function(t,i){return n.cookie(t)!==null?(n.cookie(t,null,i),!0):!1}}(jQuery,document),function(n){var i=null,t=null,r=-1;window.ctdatabase||(window.ctdatabase={loadData:function(t){n.ajax({url:"/js/ct_database.min.json",async:!0,dataType:"json",success:function(n){i=n},error:function(t,i){n("#notificationArea").text("Database error, please refresh. "+i).show()},complete:function(){t()},timeout:3e4,cache:!0})},getMnemonic:function(r,u){var v,h,o,c,l,s,e,y,a,f;if(l=ctdatabase.setSignedValue(r,1),v=r.menuId,h=r.parameterId,t!==null&&t.menu!==undefined){for(s=0;s<t.menu.length;s++)if(t.menu[s].n==v){o=t.menu[s];break}if(o!==undefined&&o.mnemonic!=null&&o.mnemonic.hasOwnProperty(h)&&(c=o.mnemonic[h],i.Devices.mnemonic!==undefined&&i.Devices.mnemonic.hasOwnProperty(c))){if(e=i.Devices.mnemonic[c],u)for(n("#writeSelect").empty(),f=0;f<e.v.length;f++)e.v[f]<=r.max&&e.v[f]>=r.min&&(y='<option value="'+e.v[f]+'">'+ctdatabase.getCaption(e.c[f])+"<\/option>",n("#writeSelect").append(y),e.v[f]==l&&(a=e.c[f],n("#writeSelect").val(String(e.v[f]))));else for(f=0;f<e.v.length;f++)e.v[f]==l&&(a=e.c[f]);return ctdatabase.getCaption(a)}}return null},getCaption:function(n){return i.Devices.en!=null?i.Devices.en[n]:""},getDeviceName:function(n){var t={"0.7":"CSD100","0.8":"Elevator E200","0.9":"Elevator E300","0.0":"GT Base","0.10":"HVAC Drive H300","0.11":"Powerdrive F300","0.12":"Unidrive HS70","0.13":"Unidrive HS71","0.14":"Unidrive HS72","0.5":"Unidrive M600","0.1":"Unidrive M700","0.2":"Unidrive M701","0.3":"Unidrive M702","1.0":"OL Base","1.7":"Unidrive HS30","1.3":"Unidrive M200","1.4":"Unidrive M201","1.5":"Unidrive M300","1.6":"Unidrive M400","430":"Ethernet","448":"SI-CANopen","447":"SI-DeviceNet","431":"SI-EtherCAT","433":"SI-Ethernet","443":"SI-PROFIBUS","432":"SI-PROFINET RT","434":"SI-PROFINET RT V2","311":"MCi200","310":"MCi210","304":"SI-Applications Plus","105":"SI-Encoder","106":"SI-Universal Encoder","209":"SI-IO"},i="Device not listed ("+n+")";return t!==null&&t[n]!==undefined&&(i=t[n]),i},setModeDependentUnits:function(n,t,i){if(i.substr(0,13)=="modeDependent"){var r=parseInt(i.substr(13));switch(r){case 8:switch(n){case 1:i="Revs";break;case 2:case 3:i=t?"mm":"Revs";break;default:i=""}break;case 15:switch(n){case 1:i="Hz";break;case 2:case 3:i=t?"mm/s":"rpm";break;default:i=""}break;case 16:switch(n){case 1:i="rpm";break;case 2:case 3:i=t?"mm/s":"rpm";break;default:i=""}break;case 27:switch(n){case 1:i="s²/100Hz";break;case 2:case 3:i=t?"s²/1000mm/s":"s²/1000rpm";break;default:i=""}break;case 28:switch(n){case 1:i="s²/1000rpm";break;case 2:case 3:i=t?"s²/1000mm/s":"s²/1000rpm";break;default:i=""}break;default:i=""}}return i},setSignedValue:function(n,t){var r=n.currentValue,i=0,u=0,f;switch(n.dataType){case 1:i=8;u=255;break;case 3:i=16;u=65535;break;case 5:i=32;u=4294967295;break;case 7:i=64;u=1844674407370955e4;break;case 9:i=128;u=34028236692093846e22;break;default:i=0}return i=parseInt(i),i!=0&&r>>i-1&!0&&(t==1?r=r-Math.pow(2,i):t==2&&(f=ctdatabase.decimalToHexString(r,u),r=parseInt(f,16))),r},setFormatValue:function(n){var t=n.currentValue,r,u,f,e,i;switch(n.dataType){case 0:switch(t){case 0:r=getTT("Off","tt_61");break;case 1:r=getTT("On","tt_62");break;default:r=getTT("Unknown Boolean Value","tt_92")}break;default:switch(n.formatId){case 0:t=ctdatabase.setSignedValue(n,1);r=n.decimalPlaces!=0?(t/Math.pow(10,n.decimalPlaces)).toFixed(n.decimalPlaces):t;break;case 1:for(t=t.toString(),i=t.length;i<6;i++)t="0"+t;r=t.substr(0,2)+"-"+t.substr(2,2)+"-"+t.substr(4,2);break;case 2:for(t=t.toString(),i=t.length;i<6;i++)t="0"+t;r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2);break;case 3:for(r="",e=t.toString(16),t=[],i=0;i<4;i+=1)t[i]=parseInt(e.substr(i*2,2),16),r+=String.fromCharCode(t[i]);break;case 4:for(r=t.toString(2),i=r.length;i<n.max.toString(2).length;i++)r="0"+r;break;case 5:for(r="",u=[],u[0]=t>>24&255,u[1]=t>>16&255,u[2]=t>>8&255,u[3]=t&255,f=0;f<4;f++){for(u[f]=u[f].toString(),i=u[f].length;i<3;i++)u[f]="0"+u[f];r=r+u[f];f!=3&&(r=r+".")}break;case 6:for(e=t.toString(16),t="",i=0;i<e.length;i+=2)t+=e.substr(i,2).toString().toUpperCase();for(i=t.length;i<12;i++)t="0"+t;r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2)+":"+t.substr(6,2)+":"+t.substr(8,2)+":"+t.substr(10,2);break;case 7:for(t=t.toString(),i=t.length;i<8;i++)t="0"+t;r=t.substr(0,2)+"."+t.substr(2,2)+"."+t.substr(4,2)+"."+t.substr(6,2);break;case 8:for(t=t.toString(),i=t.length;i<6;i++)t="0"+t;r=t.substr(0,1)+"."+t.substr(1,2)+"."+t.substr(3,3);break;case 9:t=t.toString();r="00"+t;break;default:r=t}}return r},setWriteFormat:function(n,t,i,r){var c=255,f,y=n.formatId,h,o,l,e,u;n.currentValue=t;switch(y){case 0:case 9:h=new String;h=t.toString();c=h.indexOf(".")>-1?h.length-h.indexOf(".")-1:0;n.currentValue=t*Math.pow(10,c);f=ctdatabase.setSignedValue(n,2);break;case 1:case 2:f=t*1e4+i*100+r*1;break;case 3:for(o=[],f="",u=0;u<t.length;u++)o[u]=t.substr(u,1),o[u]=o[u].charCodeAt(0),o[u]=o[u].toString(16),f+=o[u];f=parseInt(f,16);break;case 4:for(l=!1,t=t.toString(),u=0;u<t.length;u++)if(t.substr(u,1)!="0"&&t.substr(u,1)!="1"){l=!0;f=0;break}l||(t=t.toString(2),f=parseInt(t,2));break;case 5:var a="",s=[],v=t.split(".");for(e=0;e<v.length;e++){for(s[e]=parseInt(v[e],10),s[e]=ctdatabase.decimalToHexString(s[e]).toString(),u=s[e].length;u<2;u++)s[e]="0"+s[e];a=a+s[e]}f=parseInt(a,16);break;case 8:f=t*1e5+i*1e3+r*1}return n.currentValue=f,n.decimalPlaces=c,n},isValidInput:function(n,t,i,r){var e=10,c=n.formatId,s,u,o,f;n.currentValue=t;s=[t,i,r];switch(c){case 0:case 9:isNaN(t)&&(e=11);break;case 1:for(u=0;u<3;u++)for(o=s[u].toString(),o.length>2&&(e=12),f=0;f<o.length;f++)if(isNaN(o.substr(f,1))||s[u]<0){e=13;break}e==10&&(t>31||i>12||r>99)&&(e=14);break;case 2:for(u=0;u<3;u++)for(o=s[u].toString(),f=0;f<o.length;f++)if(isNaN(o.substr(f,1))||s[u]<0){e=16;break}e==10&&(t>23||i>59||r>59)&&(e=17);break;case 3:t.length>ctdatabase.getValueSize(n.dataType)&&(e=18);break;case 4:if(t=t.toString(),t.length>ctdatabase.getValueSize(n.dataType)*8){e=19;break}for(f=0;f<t.length;f++)if(t.substr(f,1)!="0"&&t.substr(f,1)!="1"){e=20;break}break;case 5:var h=t.split(".");for(h.length!=4&&(e=21),u=0;u<h.length;u++)for(o=h[u].toString(),(o.length>3||o.length<1)&&(e=21),f=0;f<o.length;f++)if(isNaN(o.substr(f,1))||h[u]<0||h[u]>255){e=23;break}break;case 8:for(u=0;u<3;u++)for(o=s[u].toString(),f=0;f<o.length;f++)if(isNaN(o.substr(f,1))||s[u]<0){e=24;break}e==10&&(t>4||i>99||r>999)&&(e=25)}return e},getValueSize:function(n){switch(n){case 0:case 1:case 2:return 1;case 3:case 4:case 30:return 2;case 5:case 6:case 20:return 4;case 7:case 8:case 21:return 8;case 9:case 10:return 16;default:return 0}},getPath:function(n){var r,u;if(i!==null){for(r=i.Devices,u=0;u<r.Product.length;u++)if(r.Product[u].id==n){r=r.Product[u];break}t=r}},decimalToHexString:function(n,t){return n<0&&(n=t+parseInt(n,10)+1),n.toString(16).toUpperCase()},populateMenuDropDown:function(i,r){var s=new classRequestReadWithType,e,u,f,o,h;if(n("#selectMenu").empty(),t!==null&&t.menu!=null)for(e=0;e<t.menu.length;e++){if(u=t.menu[e],f=!1,n("#selectSlot").find("option:selected").attr("id")!="optionSlot0"&&n("#selectSlot").val()!=undefined)f=!0;else if(u!==undefined)if(u.Modes===undefined)u.slot!==undefined&&(n("#selectMenu").append('<option value="-'+u.n+'" data-slot="'+u.slot+'" disabled>'+u.n+" - Checking slot "+u.slot+"...<\/option>"),s.addParameter(u.n,1,0,function(t){t.currentValue==0?n('#selectMenu option[value="-'+t.menuId+'"]').text(t.menuId+" - Option Not Fitted"):n('#selectMenu option[value="-'+t.menuId+'"]').text(t.menuId+" - "+ctdatabase.getDeviceName(t.currentValue)).val(-t.currentValue).prop("disabled",!1)}));else if(u.Modes.Mode.length!==undefined){for(o=0;o<u.Modes.Mode.length;o++)if(h=u.Modes.Mode[o],h.n==i){f=!0;break}}else u.Modes.Mode.n==i&&(f=!0);f&&n("#selectMenu").append('<option value="'+u.n+'">'+u.n+" - "+ctdatabase.getCaption(u.c)+"<\/option>")}r!==undefined?n("#selectMenu").val(r):r=n("#selectMenu").val();oRequestQueue.addRequest(s);ctdatabase.populateParameterDropDown(i,r)},populateParameterDropDown:function(i,u){var s,v,o,f,h,c,e,l,a;if(r=-1,i===undefined&&(i=1),u!==undefined){if(n("#selectParameter").empty(),s=!1,n("#selectSlot").find("option:selected").attr("id")!="optionSlot0"&&n("#selectSlot").val()!=undefined&&(s=!0),v=!1,parseInt(u)<0&&(v=!0,s=!0,ctdatabase.getPath(-parseInt(u)),u=0),t!==null)for(o=0;o<t.menu.length;o++)if(f=t.menu[o],f.n==u){if(h=s,f.Modes!==undefined)if(f.Modes.Mode.length!==undefined){for(c=0;c<f.Modes.Mode.length;c++)if(mode=f.Modes.Mode[c],mode.n==i){h=!0;break}}else f.Modes.Mode.n==i&&(h=!0);if(h&&f.p!==undefined){for(r=o,e=0;e<f.p.length;e++)l=f.p[e],l!==undefined&&l!=0&&(a=ctdatabase.getCaption(l),a==""&&(a=getTT("Parameter mm.","tt_65")+e),n("#selectParameter").append('<option value="'+e+'">'+e+" - "+a+"<\/option>"));break}}v&&ctdatabase.getPath(n("#selectSlot").val());n("#selectParameter").prop("selectedIndex",0)}},getParameterCaption:function(n,i,r){var f,u,e,o,s,h;if(t!==null)for(f=0;f<t.menu.length;f++)if(u=t.menu[f],u.n==n){if(e=!1,u.Modes!==undefined)if(u.Modes.Mode.length!==undefined){for(o=0;o<u.Modes.Mode.length;o++)if(mode=u.Modes.Mode[o],mode.n==r){e=!0;break}}else u.Modes.Mode.n==r&&(e=!0);if(e&&u.p!==undefined&&(s=u.p[i],s!==undefined&&s!=0))return h=ctdatabase.getCaption(s),h==""&&(h="#"+n.padLeft(2,"0")+"."+i.padLeft(3,"0")),h}return"#"+n.padLeft(2,"0")+"."+i.padLeft(3,"0")},getErrorMessage:function(n,t,i,r){var u="";switch(n){case 0:u=getTT("The value was read or written successfully","tt_71");break;case 9:u=getTT("Error - The value could not be written to the drive","tt_51");break;case 11:u=getTT("Error - Value must be a number","tt_35");break;case 12:u=getTT("Error - The date format must be xx-xx-xx","tt_20");break;case 13:u=getTT("Error - The day, month and year must be positive integers","tt_21");break;case 14:u=getTT("Error - Date value out of range","tt_22");break;case 16:u=getTT("Error - The time values must be positive integers","tt_40");break;case 17:u=getTT("Error - Time value out of range","tt_41");break;case 18:u=getTT("Error - The input value has too many characters. Max characters:","tt_33")+" "+ctdatabase.getValueSize(r);break;case 19:u=getTT("Error - The input value has too many bits. Max bits:","tt_32")+" "+ctdatabase.getValueSize(r)*8;break;case 20:u=getTT("Error - The value must be represented in bits (ie. only 0s and 1s)","tt_18");break;case 21:u=getTT("Error - The format is incorrect. IP addresses must be in the format xxx.xxx.xxx.xxx","tt_30");break;case 23:u=getTT("Error - Input is out of range. Each value between the dots must be a positive integer (from 0 to 255)","tt_31");break;case 24:u=getTT("Error - The values must be positive integer","tt_37");break;case 25:u=getTT("Error - Input value out of range. Format: Slot.Menu.Param (x.xx.xxx)","tt_36");break;case 130:u=getTT("The value was written successfully; however it clamped to fit a limit.","tt_19");break;case 243:u=getTT("Error - The decimal place information is invalid (i.e. out of range of allowed values)","tt_23");break;case 246:u=t.formatId==4?getTT("Error - Input out of range. Value must be between:","tt_17")+" "+t.min.toString(2)+" and "+t.max.toString(2):getTT("Error - Input out of range. Value must be between:","tt_17")+" "+t.min/Math.pow(10,i)+" and "+t.max/Math.pow(10,i);break;case 247:u=getTT("Error - The data could not be written as the destination does not allow write access","tt_15");break;default:u=getTT("Error - The value could not be written, reason unknown","tt_44")}return u}})}(jQuery);